<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Qalb Connect - Register</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Sidebar content: Logo and Feature Image -->
    <div class="sidebar">
        <div class="logo">
            <!-- Your logo image with fallback -->
            <img th:src="@{/images/qalbconnectlogo.png}" alt="QALB CONNECT Logo" onerror="this.onerror=null;this.src='https://placehold.co/150x150/0a1d15/bfdecc?text=LOGO';">
            <h1>QALB CONNECT</h1>
        </div>
        <div class="image">
            <!-- Your feature image with fallback -->
            <img th:src="@{/images/featuresimage.jpg}" alt="Islamic Practices" onerror="this.onerror=null;this.src='https://placehold.co/400x300/0a1d15/bfdecc?text=Islamic+Practices';">
        </div>
    </div>

    <!-- Main content area: Registration Form -->
    <div class="main-content">
        <div class="container">
            <h1>Register</h1>
            <!-- The form will submit to /register (handled by AuthController@registerUser) -->
            <!-- object="user" binds the form fields to our UserRegistrationDto -->
            <!-- th:action="@{/register}" ensures the correct POST URL -->
            <form th:action="@{/register}" th:object="${user}" method="post">
                <label for="username">Username:</label>
                <!-- th:field="*{username}" binds to the 'username' property of the 'user' DTO -->
                <input type="text" id="username" th:field="*{username}" placeholder="Enter your username" required>
                <!-- Display validation error for username -->
                <p th:if="${#fields.hasErrors('username')}" th:errors="*{username}" class="error-message"></p>

                <label for="email">Email:</label>
                <input type="email" id="email" th:field="*{email}" placeholder="Enter your email" required>
                <!-- Display validation error for email -->
                <p th:if="${#fields.hasErrors('email')}" th:errors="*{email}" class="error-message"></p>

                <label for="password">Password:</label>
                <input type="password" id="password" th:field="*{password}" placeholder="Enter your password" required>
                <!-- Display validation error for password -->
                <p th:if="${#fields.hasErrors('password')}" th:errors="*{password}" class="error-message"></p>

                <!-- Display a general registration error message if the service returned null (e.g., username/email exists) -->
                <p th:if="${registrationError}" th:text="${registrationError}" class="error-message"></p>

                <button type="submit">Register</button>
            </form>
            <p>Already have an account? <a th:href="@{/login}">Login here</a></p>
        </div>
    </div>
</body>
</html>
